<!DOCTYPE html>

<html lang="{{ locale }}">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">

    <title>{{ title }}</title>
    <meta name="description" content="{{ description }}" />
    <meta name="author" content="{{ author }}" />

    <link rel="apple-touch-icon" sizes="180x180" href="/static/img/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/static/img/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/static/img/favicons/favicon-16x16.png">
    <link rel="manifest" href="/static/img/favicons/site.webmanifest">
    <link rel="mask-icon" href="/static/img/favicons/safari-pinned-tab.svg" color="#5bbad5">
    <link rel="shortcut icon" href="/static/img/favicons/favicon.ico">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="/static/img/favicons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.0/font/bootstrap-icons.css">
  </head>

  <body>
    <nav class="nav" role="navigation">
    {%- for available_language in site.languages -%}
    {#- set translatedUrl to the homepage of that language by default -#}
    {% set translatedUrl = "/" + available_language.code + "/" -%}
    {#- set current language class -#}
    {%- set activeClass = " active" if available_language.code == locale else "" -%}
    {%- set ariaCurrent = ' aria-current="page"' if available_language.code == locale else "" -%}
    {#- loop through all the content of the site -#}
    {%- for item in collections.all %}
    {# for each item in the loop, check if
    - its translationKey matches the current item translationKey
    - its locale matches the code of the language we are looping through -#}
    {%- if item.data.translationKey == translationKey and item.data.locale == available_language.code -%}
      {%- set translatedUrl = item.url -%}
    {%- endif -%}
    {%- endfor -%}
    <a class="nav-link text-secondary{{ activeClass }}{% if loop.first %} ms-auto{% endif %}"{{ ariaCurrent | safe }} lang="{{ available_language.code }}" hreflang="{{ available_language.code }}" href="/{{ available_language.code }}//{{translatedUrl}}">
      {{ available_language.code }}
    </a>
    {%- endfor %}
</nav>
    {{ content | safe }}
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
